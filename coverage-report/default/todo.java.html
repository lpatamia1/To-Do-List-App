<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>todo.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">To-Do List App Coverage</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">todo.java</span></div><h1>todo.java</h1><pre class="source lang-java linenums">import java.io.*;
import java.text.SimpleDateFormat;
import java.util.*;
import java.time.LocalDate;
import com.google.gson.*;

<span class="nc" id="L7">public class todo {</span>
<span class="fc" id="L8">    private static final List&lt;Task&gt; tasks = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L9">    private static final SimpleDateFormat timestamp = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);</span>
<span class="fc" id="L10">    private static int addedToday = 0;</span>
<span class="fc" id="L11">    private static int completedToday = 0;</span>
<span class="fc" id="L12">    private static final java.time.LocalDateTime startTime = java.time.LocalDateTime.now();</span>

    public static void main(String[] args) {
<span class="fc" id="L15">        retroBoot();</span>
<span class="fc" id="L16">        loadTasksJSON();</span>
<span class="fc" id="L17">        showStartupSummary();</span>
<span class="fc" id="L18">        Scanner scanner = new Scanner(System.in);</span>
<span class="fc" id="L19">        ColorText.banner(&quot;      üå∏ Retro To-Do List üå∏&quot;);</span>
<span class="fc" id="L20">        showQuote();</span>

        while (true) {
<span class="fc" id="L23">            ColorText.line();</span>
<span class="fc" id="L24">            System.out.println(&quot;1Ô∏è‚É£  Add Task\n2Ô∏è‚É£  View Tasks\n3Ô∏è‚É£  Mark Complete\n4Ô∏è‚É£  Show Upcoming\n5Ô∏è‚É£  Export Markdown\n6Ô∏è‚É£  View Completed\n7Ô∏è‚É£  Exit&quot;);</span>
<span class="fc" id="L25">            System.out.print(ColorText.CYAN + &quot;Choose: &quot; + ColorText.RESET);</span>
<span class="fc" id="L26">            String choice = scanner.nextLine().trim();</span>

<span class="pc bpc" id="L28" title="3 of 8 branches missed.">            switch (choice) {</span>
<span class="fc" id="L29">                case &quot;1&quot;: addTask(scanner); break;</span>
<span class="nc" id="L30">                case &quot;2&quot;: showTasks(); break;</span>
<span class="fc" id="L31">                case &quot;3&quot;: completeTask(scanner); break;</span>
<span class="nc" id="L32">                case &quot;4&quot;: showUpcoming(); break;</span>
<span class="fc" id="L33">                case &quot;5&quot;: exportMarkdown(); break;</span>
<span class="nc" id="L34">                case &quot;6&quot;: showCompleted(); break;</span>
<span class="fc" id="L35">                case &quot;7&quot;: exitApp(); scanner.close(); return;</span>
<span class="fc" id="L36">                default: beep(); ColorText.warn(&quot;‚ùì Invalid option. Try again!&quot;);</span>
            }
<span class="fc" id="L38">        }</span>
    }

    // --- Core Features ---

    private static void addTask(Scanner scanner) {
<span class="fc" id="L44">        System.out.print(ColorText.YELLOW + &quot;Enter task: &quot; + ColorText.RESET);</span>
<span class="fc" id="L45">        String name = scanner.nextLine().trim();</span>
<span class="pc bpc" id="L46" title="1 of 2 branches missed.">        if (name.isEmpty()) {</span>
<span class="nc" id="L47">            ColorText.warn(&quot;You can‚Äôt add an empty task!&quot;);</span>
<span class="nc" id="L48">            return;</span>
        }

<span class="fc" id="L51">        System.out.print(ColorText.YELLOW + &quot;Set priority (H/M/L or blank): &quot; + ColorText.RESET);</span>
<span class="fc" id="L52">        String input = scanner.nextLine().trim().toUpperCase();</span>
        String priority;
<span class="pc bpc" id="L54" title="2 of 4 branches missed.">        switch (input) {</span>
<span class="fc" id="L55">            case &quot;H&quot;: priority = &quot;HIGH&quot;; break;</span>
<span class="fc" id="L56">            case &quot;M&quot;: priority = &quot;MED&quot;; break;</span>
<span class="nc" id="L57">            case &quot;L&quot;: priority = &quot;LOW&quot;; break;</span>
<span class="nc" id="L58">            default: priority = &quot;NONE&quot;; break;</span>
        }

<span class="fc" id="L61">        System.out.print(ColorText.YELLOW + &quot;Enter due date (YYYY-MM-DD or blank): &quot; + ColorText.RESET);</span>
<span class="fc" id="L62">        String dueInput = scanner.nextLine().trim();</span>
<span class="fc" id="L63">        LocalDate due = null;</span>
<span class="pc bpc" id="L64" title="1 of 2 branches missed.">        if (!dueInput.isEmpty()) {</span>
<span class="fc" id="L65">            try { due = LocalDate.parse(dueInput); }</span>
<span class="pc" id="L66">            catch (Exception e) { ColorText.warn(&quot;‚ö†Ô∏è Invalid date format. Skipping due date.&quot;); }</span>
        }

<span class="fc" id="L69">        Task newTask = new Task(name, priority, due);</span>
<span class="fc" id="L70">        tasks.add(newTask);</span>
<span class="fc" id="L71">        addedToday++;</span>
<span class="fc" id="L72">        Collections.sort(tasks);</span>
<span class="fc" id="L73">        beep();</span>
<span class="fc" id="L74">        ColorText.success(&quot;Task added!&quot;);</span>
<span class="fc" id="L75">        saveTasksJSON();</span>
<span class="fc" id="L76">        pauseAndClear(scanner);</span>
<span class="fc" id="L77">    }</span>

    private static void showTasks() {
<span class="fc" id="L80">        Collections.sort(tasks);</span>
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">        if (tasks.isEmpty()) {</span>
<span class="nc" id="L82">            ColorText.warn(&quot;üåà No tasks yet!&quot;);</span>
<span class="nc" id="L83">            pauseAndClear(new Scanner(System.in));</span>
<span class="nc" id="L84">            return;</span>
        }

        // --- Table Header (your formatting kept) ---
<span class="fc" id="L88">        ColorText.info(&quot;\nüìù Your Tasks:&quot;);</span>
<span class="fc" id="L89">        System.out.printf(ColorText.CYAN + &quot;%-3s %-37s %-18s %-12s%n&quot; + ColorText.RESET,</span>
                &quot;#&quot;, &quot;Task&quot;, &quot;Priority&quot;, &quot;Due Date&quot;);
<span class="fc" id="L91">        System.out.println(ColorText.CYAN + &quot;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ&quot; + ColorText.RESET);</span>

        // --- Table Rows ---
<span class="fc bfc" id="L94" title="All 2 branches covered.">        for (int i = 0; i &lt; tasks.size(); i++) {</span>
<span class="fc" id="L95">            Task t = tasks.get(i);</span>
<span class="fc bfc" id="L96" title="All 2 branches covered.">            if (t.isCompleted()) continue;</span>

<span class="fc" id="L98">            String priority = t.getPriority();</span>
<span class="fc bfc" id="L99" title="All 2 branches covered.">            String due = (t.getDue() == null) ? &quot;üí§ [NO DUE DATE]&quot; : t.getDue().toString();</span>

            // --- Color priority like your version ---
            String coloredPriority;
<span class="fc bfc" id="L103" title="All 4 branches covered.">            switch (priority) {</span>
                case &quot;HIGH&quot;:
<span class="fc" id="L105">                    coloredPriority = ColorText.RED + &quot;üî• [HIGH]&quot; + ColorText.RESET;</span>
<span class="fc" id="L106">                    break;</span>
                case &quot;MED&quot;:
<span class="fc" id="L108">                    coloredPriority = ColorText.YELLOW + &quot;‚ö° [MED]&quot; + ColorText.RESET;</span>
<span class="fc" id="L109">                    break;</span>
                case &quot;LOW&quot;:
<span class="fc" id="L111">                    coloredPriority = ColorText.GREEN + &quot;üåø [LOW]&quot; + ColorText.RESET;</span>
<span class="fc" id="L112">                    break;</span>
                default:
<span class="fc" id="L114">                    coloredPriority = ColorText.GRAY + &quot;üí§ [NONE]&quot; + ColorText.RESET;</span>
                    break;
            }

            // --- Highlight due date ---
<span class="fc bfc" id="L119" title="All 2 branches covered.">            if (t.getDue() != null) {</span>
<span class="fc" id="L120">                LocalDate d = t.getDue();</span>
<span class="pc bpc" id="L121" title="1 of 2 branches missed.">                if (LocalDate.now().isAfter(d)) due = ColorText.RED + due + &quot; ‚ö†Ô∏è&quot; + ColorText.RESET;</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">                else if (LocalDate.now().equals(d)) due = ColorText.YELLOW + due + &quot; ‚è∞&quot; + ColorText.RESET;</span>
<span class="fc" id="L123">                else due = ColorText.GREEN + due + ColorText.RESET;</span>
            }

            // --- Print row ---
<span class="fc" id="L127">            System.out.printf(ColorText.BLUE + &quot;%-3d %-37s %-26s %-12s&quot; + ColorText.RESET + &quot;%n&quot;,</span>
<span class="fc" id="L128">                    (i + 1), t.getName(), coloredPriority, due);</span>
        }

<span class="fc bfc" id="L131" title="All 2 branches covered.">        long noDate = tasks.stream().filter(t -&gt; t.getDue() == null).count();</span>
<span class="fc" id="L132">        ColorText.info(String.format(&quot;\nüìä %d total | %d without due date | %d added today | %d completed today&quot;,</span>
<span class="fc" id="L133">            tasks.size(), noDate, addedToday, completedToday));</span>

<span class="fc" id="L135">        pauseAndClear(new Scanner(System.in));</span>
<span class="fc" id="L136">    }</span>

    private static void completeTask(Scanner scanner) {
<span class="fc" id="L139">        showTasks();</span>
<span class="pc bpc" id="L140" title="1 of 2 branches missed.">        if (tasks.isEmpty()) return;</span>

<span class="fc" id="L142">        System.out.print(ColorText.YELLOW + &quot;Enter number to complete: &quot; + ColorText.RESET);</span>
        try {
<span class="fc" id="L144">            int index = Integer.parseInt(scanner.nextLine()) - 1;</span>
<span class="pc bpc" id="L145" title="2 of 4 branches missed.">            if (index &gt;= 0 &amp;&amp; index &lt; tasks.size()) {</span>
<span class="fc" id="L146">                Task t = tasks.get(index);</span>
<span class="fc" id="L147">                t.markCompleted();</span>
<span class="fc" id="L148">                completedToday++;</span>
<span class="fc" id="L149">                beep();</span>
<span class="fc" id="L150">                ColorText.success(&quot;‚úÖ Completed: &quot; + t.getName());</span>
<span class="fc" id="L151">                saveTasksJSON();</span>
<span class="fc" id="L152">            } else {</span>
<span class="nc" id="L153">                beep();</span>
<span class="nc" id="L154">                ColorText.warn(&quot;Invalid task number!&quot;);</span>
            }
<span class="nc" id="L156">        } catch (NumberFormatException e) {</span>
<span class="nc" id="L157">            beep();</span>
<span class="nc" id="L158">            ColorText.warn(&quot;Please enter a valid number.&quot;);</span>
<span class="fc" id="L159">        }</span>
<span class="fc" id="L160">        pauseAndClear(scanner);</span>
<span class="fc" id="L161">    }</span>

    private static void showCompleted() {
<span class="nc" id="L164">        ColorText.info(&quot;\n‚úÖ Completed Tasks:&quot;);</span>
<span class="nc" id="L165">        boolean found = false;</span>

<span class="nc bnc" id="L167" title="All 2 branches missed.">        for (Task t : tasks) {</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">            if (t.isCompleted()) {</span>
<span class="nc" id="L169">                System.out.println(ColorText.GREEN + &quot;‚úîÔ∏è  &quot; + t.getName() + ColorText.RESET);</span>
<span class="nc" id="L170">                found = true;</span>
            }
<span class="nc" id="L172">        }</span>

<span class="nc bnc" id="L174" title="All 2 branches missed.">        if (!found)</span>
<span class="nc" id="L175">            System.out.println(ColorText.YELLOW + &quot;No completed tasks yet!&quot; + ColorText.RESET);</span>

<span class="nc" id="L177">        pauseAndClear(new Scanner(System.in));</span>
<span class="nc" id="L178">    }</span>

    private static void showUpcoming() {
<span class="nc" id="L181">        ColorText.info(&quot;\nüìÖ Tasks due within 3 days:&quot;);</span>
<span class="nc" id="L182">        boolean found = false;</span>

<span class="nc bnc" id="L184" title="All 2 branches missed.">        for (Task t : tasks) {</span>
<span class="nc" id="L185">            LocalDate due = t.getDue();</span>
<span class="nc bnc" id="L186" title="All 6 branches missed.">            if (due != null &amp;&amp; !LocalDate.now().isAfter(due) &amp;&amp; !due.isAfter(LocalDate.now().plusDays(3))) {</span>

                String emoji;
<span class="nc bnc" id="L189" title="All 2 branches missed.">                if (due.equals(LocalDate.now()))</span>
<span class="nc" id="L190">                    emoji = ColorText.RED + &quot;‚ö†Ô∏è  &quot; + ColorText.RESET; // Due today</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">                else if (due.equals(LocalDate.now().plusDays(1)))</span>
<span class="nc" id="L192">                    emoji = ColorText.YELLOW + &quot;‚è∞ &quot; + ColorText.RESET; // Due tomorrow</span>
                else
<span class="nc" id="L194">                    emoji = ColorText.GREEN + &quot;üåø &quot; + ColorText.RESET; // Due in 2-3 days</span>

                // ‚úÖ Now prints correctly, emoji appears before the task name
<span class="nc" id="L197">                System.out.println(emoji + t.getName() + &quot; ‚Üí &quot; + ColorText.CYAN + due + ColorText.RESET);</span>
<span class="nc" id="L198">                found = true;</span>
            }
<span class="nc" id="L200">        }</span>

<span class="nc bnc" id="L202" title="All 2 branches missed.">        if (!found)</span>
<span class="nc" id="L203">            System.out.println(ColorText.GREEN + &quot;No tasks due soon!&quot; + ColorText.RESET);</span>

<span class="nc" id="L205">        pauseAndClear(new Scanner(System.in));</span>
<span class="nc" id="L206">    }</span>

    private static void exportMarkdown() {
<span class="fc" id="L209">        try (PrintWriter writer = new PrintWriter(new FileWriter(&quot;tasks.md&quot;))) {</span>
<span class="fc" id="L210">            writer.println(&quot;# üìù Retro To-Do List&quot;);</span>
<span class="fc" id="L211">            writer.println(&quot;_Updated: &quot; + timestamp.format(new Date()) + &quot;_\n&quot;);</span>
<span class="pc bpc" id="L212" title="1 of 2 branches missed.">            if (tasks.isEmpty()) {</span>
<span class="nc" id="L213">                writer.println(&quot;‚úÖ All tasks completed! üéâ&quot;);</span>
            } else {
<span class="fc" id="L215">                writer.println(&quot;## Pending Tasks:\n&quot;);</span>
<span class="fc bfc" id="L216" title="All 2 branches covered.">                for (Task t : tasks) {</span>
<span class="fc bfc" id="L217" title="All 2 branches covered.">                    String box = t.isCompleted() ? &quot;[x]&quot; : &quot;[ ]&quot;;</span>
<span class="fc" id="L218">                    writer.println(&quot;- &quot; + box + &quot; &quot; + t.getName() + &quot; (&quot; + t.getPriority() + &quot;)&quot;);</span>
<span class="fc" id="L219">                }</span>
            }
<span class="fc" id="L221">            ColorText.success(&quot;üóíÔ∏è  Exported to tasks.md&quot;);</span>
<span class="nc" id="L222">        } catch (IOException e) {</span>
<span class="nc" id="L223">            ColorText.warn(&quot;‚ö†Ô∏è Could not export to Markdown.&quot;);</span>
<span class="fc" id="L224">        }</span>
<span class="fc" id="L225">    }</span>

    // --- Aesthetic Touches ---

    private static void retroBoot() {
<span class="fc" id="L230">        String[] bootMsgs = {</span>
            &quot;Spinning floppy drive... üíæ&quot;,
            &quot;Installing Java Runtime... ‚òï&quot;,
            &quot;Rendering pixels of productivity... üé®&quot;,
            &quot;Charging up your to-do list... ‚ö°&quot;,
            &quot;Calibrating retro vibes... üïπÔ∏è&quot;,
            &quot;Checking for Y2K bugs... üßÆ&quot;,
            &quot;Loading system aesthetics... üåà&quot;,
            &quot;Compiling positive energy... ‚ú®&quot;,
            &quot;Booting motivation module... üöÄ&quot;
        };

<span class="fc" id="L242">        List&lt;String&gt; shuffled = new ArrayList&lt;&gt;(Arrays.asList(bootMsgs));</span>
<span class="fc" id="L243">        Collections.shuffle(shuffled);</span>
<span class="fc" id="L244">        List&lt;String&gt; chosen = shuffled.subList(0, 4);</span>

<span class="fc" id="L246">        System.out.println(ColorText.BLACK + &quot;üîß Initializing Retro Environment...&quot; + ColorText.RESET);</span>

<span class="fc" id="L248">        int totalSteps = 40;</span>
<span class="fc bfc" id="L249" title="All 2 branches covered.">        for (int i = 0; i &lt;= totalSteps; i++) {</span>
<span class="fc" id="L250">            int progress = (i * 100) / totalSteps;</span>

<span class="fc" id="L252">            StringBuilder bar = new StringBuilder();</span>
<span class="fc bfc" id="L253" title="All 2 branches covered.">            for (int j = 0; j &lt; i; j++) {</span>
<span class="fc" id="L254">                double ratio = (double) j / totalSteps;</span>

                // üåà Proper red-start rainbow gradient using rotated sine waves
<span class="fc" id="L257">                double frequency = 1.7 * Math.PI;</span>

                // üåà Correct alignment: starts at pure red
<span class="fc" id="L260">                int r = (int)(Math.sin(frequency * ratio + Math.PI / 2) * 127 + 128);         // red peaks first</span>
<span class="fc" id="L261">                int g = (int)(Math.sin(frequency * ratio - Math.PI / 6) * 127 + 128);         // green lags slightly</span>
<span class="fc" id="L262">                int b = (int)(Math.sin(frequency * ratio - 5 * Math.PI / 6) * 127 + 128);     // blue trails farthest</span>

<span class="fc" id="L264">                bar.append(String.format(&quot;\033[38;2;%d;%d;%dm‚ñà\033[0m&quot;, r, g, b));</span>
            }
<span class="fc bfc" id="L266" title="All 2 branches covered.">            for (int j = i; j &lt; totalSteps; j++) bar.append(&quot;‚ñí&quot;);</span>

<span class="fc" id="L268">            System.out.printf(&quot;\rLoading: [%s] %3d%%&quot;, bar, progress);</span>
<span class="pc" id="L269">            try { Thread.sleep(70); } catch (InterruptedException ignored) {}</span>
        }
<span class="fc" id="L271">        System.out.println(&quot;\033[0m&quot;); // reset color</span>

<span class="fc" id="L273">        System.out.println();</span>
<span class="fc bfc" id="L274" title="All 2 branches covered.">        for (String msg : chosen) {</span>
<span class="fc" id="L275">            System.out.println(ColorText.BLACK + msg + ColorText.RESET);</span>
<span class="pc" id="L276">            try { Thread.sleep(600); } catch (InterruptedException ignored) {}</span>
<span class="fc" id="L277">        }</span>
<span class="fc" id="L278">        System.out.println(&quot;\n&quot; + ColorText.CYAN + &quot;‚ú® Ready to roll! ‚ú®&quot; + ColorText.RESET);</span>
<span class="fc" id="L279">    }</span>

    private static void showQuote() {
<span class="fc" id="L282">        String[] quotes = {</span>
            &quot;Keep calm and code on üíª&quot;,
            &quot;Progress, not perfection üåà&quot;,
            &quot;Every bug teaches you something üêõ&quot;,
            &quot;One task at a time ü™©&quot;,
            &quot;Stay groovy and productive! üé∏&quot;,
            &quot;You are doing great! üåü&quot;,
            &quot;Make today ridiculously amazing! üöÄ&quot;,
        };
<span class="fc" id="L291">        Random rand = new Random();</span>
<span class="fc" id="L292">        System.out.println(ColorText.CYAN + &quot;üí¨ &quot; + quotes[rand.nextInt(quotes.length)] + ColorText.RESET);</span>
<span class="fc" id="L293">    }</span>

    private static void exitApp() {
<span class="fc" id="L296">        ColorText.line();</span>
<span class="fc" id="L297">        ColorText.success(&quot;Exiting‚Ä¶ your tasks are saved!&quot;);</span>
<span class="fc" id="L298">        ColorText.info(&quot;üìÖ Today‚Äôs Stats: Added &quot; + addedToday + &quot; | Completed &quot; + completedToday);</span>
        
<span class="fc" id="L300">        saveTasksJSON();</span>
<span class="fc" id="L301">        exportMarkdown();</span>

<span class="fc" id="L303">        ColorText.info(&quot;üìÇ Serialized &quot; + tasks.size() + &quot; tasks to tasks.json&quot;);</span>
    
<span class="fc" id="L305">        java.time.Duration session = java.time.Duration.between(startTime, java.time.LocalDateTime.now());</span>
<span class="fc" id="L306">        long minutes = session.toMinutes();</span>
<span class="fc" id="L307">        long seconds = session.minusMinutes(minutes).getSeconds();</span>

<span class="pc bpc" id="L309" title="1 of 4 branches missed.">        if (minutes == 0 &amp;&amp; seconds &lt; 10) {</span>
<span class="fc" id="L310">            ColorText.info(&quot;‚è±Ô∏è  Session Duration: &quot; + seconds + &quot; seconds&quot;);</span>
        }
        else {
<span class="fc" id="L313">            ColorText.info(String.format(&quot;‚è±Ô∏è  Session Duration: %d minutes, %d seconds&quot;, minutes, seconds));</span>
        }
        
<span class="fc" id="L316">        ColorText.success(&quot;‚ú® Goodbye! Stay groovy and productive! üé∏&quot;);</span>

        try {
<span class="fc" id="L319">            Thread.sleep(400);</span>
<span class="fc" id="L320">            System.out.print(&quot;\n&quot; + ColorText.PINK + &quot;             ‚Ä¢beep‚Ä¢&quot; + ColorText.RESET + &quot;\n&quot;);</span>
<span class="fc" id="L321">            java.awt.Toolkit.getDefaultToolkit().beep();</span>
<span class="fc" id="L322">            System.out.flush();</span>
<span class="fc" id="L323">            Thread.sleep(600);</span>
<span class="fc" id="L324">            fadeOut();</span>
<span class="pc" id="L325">        } catch (InterruptedException ignored) {}</span>
<span class="fc" id="L326">    }</span>

    private static void beep() {
        try {
            // Try real beep if possible
<span class="fc" id="L331">            java.awt.Toolkit.getDefaultToolkit().beep();</span>
<span class="pc" id="L332">        } catch (Exception ignored) {}</span>

        // Retro visual beep ‚Äî centered on its own line
<span class="fc" id="L335">        System.out.print(&quot;\n&quot; + ColorText.PINK + &quot;             ‚Ä¢beep‚Ä¢&quot; + ColorText.RESET + &quot;\n&quot;);</span>
<span class="fc" id="L336">        System.out.flush();</span>

        // Little blink animation to simulate feedback
        try {
<span class="fc" id="L340">            Thread.sleep(120);</span>
<span class="fc" id="L341">            System.out.print(&quot;\r&quot; + &quot;             &quot; + &quot;\r&quot;);</span>
<span class="fc" id="L342">            Thread.sleep(100);</span>
<span class="fc" id="L343">            System.out.print(ColorText.PINK + &quot;             ‚Ä¢beep‚Ä¢&quot; + ColorText.RESET + &quot;\n&quot;);</span>
<span class="fc" id="L344">            System.out.flush();</span>
<span class="pc" id="L345">        } catch (InterruptedException ignored) {}</span>
<span class="fc" id="L346">    }</span>

    private static void fadeOut() {
<span class="fc" id="L349">        String[] frames = {</span>
            ColorText.PINK + &quot;‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí‚ñí&quot; + ColorText.RESET,
            ColorText.PURPLE + &quot;‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë&quot; + ColorText.RESET,
            ColorText.GRAY + &quot;                                &quot; + ColorText.RESET
        };

<span class="fc bfc" id="L355" title="All 2 branches covered.">        for (String frame: frames) {</span>
<span class="fc" id="L356">            System.out.print(&quot;\r&quot; + frame);</span>
<span class="fc" id="L357">            System.out.flush();</span>
<span class="pc" id="L358">            try { Thread.sleep(90); } catch (InterruptedException ignored) {}</span>
        }

<span class="fc" id="L361">        System.out.print(&quot;\r&quot; + &quot;                             &quot; + &quot;\r&quot;); </span>
<span class="fc" id="L362">        System.out.println();</span>
<span class="fc" id="L363">    }</span>

    // --- Utility Helpers ---

    private static void pauseAndClear(Scanner scanner) {
<span class="fc" id="L368">        System.out.println(&quot;\nPress Enter to return to menu...&quot;);</span>
<span class="fc bfc" id="L369" title="All 2 branches covered.">        if (scanner.hasNextLine()) scanner.nextLine();</span>
<span class="fc" id="L370">        clearScreen();</span>
<span class="fc" id="L371">    }</span>


    private static void clearScreen() {
<span class="fc" id="L375">        System.out.print(&quot;\033[H\033[2J&quot;);</span>
<span class="fc" id="L376">        System.out.flush();</span>
<span class="fc" id="L377">    }</span>

    // --- JSON Persistence ---

    private static final String JSON_FILE = &quot;tasks.json&quot;;

    /** Save all tasks to a JSON file */
    private static void saveTasksJSON() {
<span class="fc" id="L385">        try (Writer writer = new FileWriter(JSON_FILE)) {</span>
<span class="fc" id="L386">            Gson gson = new GsonBuilder()</span>
<span class="fc" id="L387">                .registerTypeAdapter(LocalDate.class, new LocalDateAdapter())</span>
<span class="fc" id="L388">                .setPrettyPrinting()</span>
<span class="fc" id="L389">                .create();</span>
<span class="fc" id="L390">            gson.toJson(tasks, writer);</span>
<span class="fc" id="L391">            ColorText.info(&quot;Tasks saved to tasks.json&quot;);</span>
<span class="nc" id="L392">        } catch (IOException e) {</span>
<span class="nc" id="L393">            ColorText.warn(&quot;‚ö†Ô∏è Could not save tasks.json: &quot; + e.getMessage());</span>
<span class="fc" id="L394">        }</span>
<span class="fc" id="L395">    }</span>

    private static void loadTasksJSON() {
<span class="fc" id="L398">        File file = new File(JSON_FILE);</span>
<span class="pc bpc" id="L399" title="1 of 2 branches missed.">        if (!file.exists()) return;</span>
<span class="fc" id="L400">        try (Reader reader = new FileReader(file)) {</span>
<span class="fc" id="L401">            Gson gson = new GsonBuilder()</span>
<span class="fc" id="L402">            .registerTypeAdapter(LocalDate.class, new LocalDateAdapter())</span>
<span class="fc" id="L403">            .create();</span>
<span class="fc" id="L404">            Task[] loaded = gson.fromJson(reader, Task[].class);</span>
<span class="pc bpc" id="L405" title="1 of 2 branches missed.">            if (loaded != null) tasks.addAll(Arrays.asList(loaded));</span>
<span class="fc" id="L406">            ColorText.success(&quot;üìÇ Loaded &quot; + tasks.size() + &quot; task(s) from tasks.json&quot;);</span>
<span class="nc" id="L407">        } catch (Exception e) {</span>
<span class="nc" id="L408">            ColorText.warn(&quot;‚ö†Ô∏è Could not load tasks.json: &quot; + e.getMessage());</span>
<span class="fc" id="L409">        }</span>
<span class="fc" id="L410">    }</span>
    private static void showStartupSummary() {
<span class="pc bpc" id="L412" title="1 of 2 branches missed.">        if (tasks.isEmpty()) {</span>
<span class="nc" id="L413">            ColorText.info(&quot;\nüì≠ No tasks yet. Let's add your first one!&quot;);</span>
<span class="nc" id="L414">            return;</span>
        }

<span class="fc" id="L417">        long totalActive = TodoLogic.countActive(tasks);</span>
<span class="fc" id="L418">        long dueSoon = TodoLogic.countDueSoon(tasks);</span>
<span class="fc" id="L419">        long overdue = TodoLogic.countOverdue(tasks);</span>

<span class="fc" id="L421">        ColorText.line();</span>
<span class="fc" id="L422">        ColorText.info(String.format(</span>
            &quot;üìÖ You have %d active task%s (%d due soon, %d overdue)&quot;,
<span class="fc" id="L424">            totalActive,</span>
<span class="pc bpc" id="L425" title="1 of 2 branches missed.">            totalActive == 1 ? &quot;&quot; : &quot;s&quot;,</span>
<span class="fc" id="L426">            dueSoon,</span>
<span class="fc" id="L427">            overdue</span>
        ));

        // Optional: motivational touch
<span class="pc bpc" id="L431" title="1 of 2 branches missed.">        if (overdue &gt; 0)</span>
<span class="nc" id="L432">            ColorText.warn(&quot;‚ö†Ô∏è  Time to catch up!&quot;);</span>
<span class="pc bpc" id="L433" title="1 of 2 branches missed.">        else if (dueSoon &gt; 0)</span>
<span class="fc" id="L434">            ColorText.success(&quot;üåü You're on top of it!&quot;);</span>
        else
<span class="nc" id="L436">            ColorText.success(&quot;‚úÖ All caught up!&quot;);</span>
<span class="fc" id="L437">    }</span>

    /** Helper to escape quotes for JSON */
    private static String escapeJson(String s) {
<span class="nc" id="L441">        return s.replace(&quot;\\&quot;, &quot;\\\\&quot;).replace(&quot;\&quot;&quot;, &quot;\\\&quot;&quot;);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>